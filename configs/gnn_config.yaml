# GNN Recommendation System Configuration

# BigQuery tables
bigquery:
  project: auxia-reporting
  dataset: temp_holley_gnn
  source_project: auxia-gcp
  source_dataset_attrs: company_1950
  source_dataset_data: data_company_1950

# GCS paths for model artifacts
gcs:
  bucket: holley-models
  checkpoint_prefix: gnn/checkpoints/
  embeddings_prefix: gnn/embeddings/

# Graph construction
graph:
  intent_window_start: "2025-09-01"
  min_price: 50.0
  co_purchase_threshold: 2
  time_decay_halflife: 30.0

# Model architecture
model:
  embedding_dim: 128
  hidden_dim: 256
  num_heads: 4
  dropout: 0.1

# Training
training:
  epochs: 100
  emb_lr: 0.001
  emb_weight_decay: 1.0e-5
  gnn_lr: 0.01
  gnn_weight_decay: 1.0e-4
  max_grad_norm: 1.0
  patience: 10
  neg_ratio_inbatch: 0.5
  neg_ratio_fitment: 0.3
  neg_ratio_random: 0.2

# Scoring
scoring:
  top_k: 20
  output_table: gnn_recommendations

# Evaluation
evaluation:
  test_window_days: 30
  sql_baseline_table: auxia-reporting.company_1950_jp.final_vehicle_recommendations
  k_values: [1, 5, 10, 20]

# Metaflow resources
metaflow:
  training:
    cpu: 16
    memory: 131072  # 128GB
    gpu: 1
  scoring:
    cpu: 8
    memory: 65536   # 64GB
    gpu: 0
